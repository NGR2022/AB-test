# AB-test
**Что будет сделано**:
    Необходимо спроектировать АВ-тест, который сможет показать эластичность спроса по цене и принять решение о росте цен. 
    А именно:
- определить ключевые метрики теста
- определить принципы отбора территорий для теста
- описать способ определения периода проведения теста
- описать методы подведения итогов теста.
Обратите внимание, что 1 регион для теста уже выбран – это регион 1. Именно в этом регионе будут повышаться цены.

**Исходные данные** (помесячно за 2 года + 1 месяц во время проведения теста)
- количество заказов
- выручка
- средний чек
- конверсия в покупку
- количество клиентов
- 
### <font color= black>Описание датасета </font>

В начальной версии датасета 28 колонок и 20 строк. <br>При этом даты - заголовки колонок. 
Данные в датасете имеют тип `object` - для стоковых данных, таких как названия регионов, названия показателей;
`float64` - для значений показателей. <br> Для анализа датасета я транспонирую датасет так, чтобы даты перешли из строки в колонку с датами; а также поменяю тип данных на `int` для показателей, которые должны быть целочисленными: Количество клиентов по регионам и Количество заказов.

<b><i><font size = 5>АВ-тест</font></i></b>
 **Принцип отбора территории для теста**	

Насколько я поняла,  мы выбираем 2 региона, в 1 из них повышаем цены (на весь регион), проводим сравнение целиком на этих регионах, без выборки клиентов внутри регионов. Т.о. это тест на групповой выборке (cluster sample).                                                                                                                                                         <br> Вторым регионом для оценки результатов теста был выбран Регион 3 в виду бОльшей схожести с Регионом 1 по Среднему чеку, ARPU. Графики ARPPPU также больше соответствуют по Ркгионам 1 и 3. Кроме этого, Регион 3 больше соотносится с Регионом 1 по количеству заказов на Клиента.  Т.о. основной принцип выбора -  наибольшая схожесть по экономической составляющей, по среднему чеку и динамике ARPU.                                                                                                                                                                                   
<br> **Описание АВ-теста**

<br> 1. `Чистота проведения теста`	не проводить других активностей, которые могут прямо или косвенно влиять на результаты теста.	
<br> 2. `Гипотезы:`
<br> Нулевая гипотеза:	Изменение цены не изменит размер выбранных метрик. Т.е. все останется, как было: результаты контрольной и тестовой версии не будут статзначимо отличаться	
<br> Альтернативная гипотеза:	Изменение цены приведет к увеличению Выручки, Среднего чека, ARPU. Версии А и В будут отличаться статзначимо.	

<br> 3. `Ключевые метрики  теста`
<br>1) Средний чек (метрика среднего) - главная метрика теста
<br>2) Выручка	(метрика среднего)
<br>3) ARPU	(метрика среднего)
<br>4) Количество клиентов	(метрика среднего)

<br> 4. `Время начала теста (с учетом сезонности)`	Желательно не проводить тесты во время праздничных дней, исключительно в будни или исключительно в выходные дни, и т.п. Данные таких тестов будет практически невозможно экстраполировать. Также не стоит проводить тесты во время внесезонного спада или быстрого сезонного роста, т.к. итоги теста могут оказаться результатом влияния внешних факторов, а не тестируемых изменений в продукте.

<br> 5. `Определение размера выборки`	Размер выборки нужен для верности проведения теста, для того, чтобы предотвратить слишком раннее или слишком позднее звершение АВ-теста. А также для того, чтобы оценить возможность его проведения с определенными входными параметрами: например, для маленьких компаний может не хватить аудитории, особенно, если планируется тест не с 2 версиями, а с 3 и более. 	

<br> 6. `Принцип определения продолжительности теста:`	После определения размера выборки можно посчитать продолжительность проведения теста. Продолжительность будет зависеть от того, сколько пользователей в сутки посещают сайт (приложение) и совершают целевое действие (влияют на метрику) по которой проводится тест. Т.е. если для теста выборка должна включать по 1000 пользователей для каждой версии (контрольной и тестовой), а в сутки в продукт заходят по 100 пользователей, то тест должен идти не менее 10 дней. При этом нужно учесть, что в 10 дней попадает один weekend, и для верности можно увеличить тест до 14 дней, чтобы картина по целевым событиям в выходные дни была лучше подкреплена данными. Если по какой-то причине в одну из версий за период теста пришло меньше пользователей, чем было расчитано для выборки, то стоит рассмотреть продление теста или его перезапуск.

<br> 7. `Picking problem`	Исключить проблему подглядывания: не делать окончательных выводов о результатах до полного завершения теста, не выключать тест до истечения изначально назначенного срока, и не удлинять его без веских причин.	

<br> 8. `Перед запуском АВ-теста` 	Еще раз перед запуском АВ-теста проверить, что все нужные изменения  в тестовую версию внесены, они работают, тестовая версия также работает. 

<br>9. `Во время теста`	Периодически проверять как работает продукт в тестовой  и  контрольной группах: сайт не зависает, у обеих групп есть доступ в интернет (например, сбой в работе оператора в регионе), т.д. 	

<br> 10. `Подвести итоги` 	Выбранные метрики теста - метрики о среднем. Поэтому для подведения итогов теста нужно расcчитать показатели: Стандартная ошибка (SE), Степень свободы, t-критерий Стьюдента, p-value. При p-value < 0.05 Нулевая гипотеза отверагается, вероятность допустить ошибку 1-го рода мала, принимается Альтернативная гипотеза. При p-value > 0.05 Нулевая гипотеза верна, Альтернативная отвергается.

<br> 11. `Проверка верности результатов теста`	Если есть сомнения в том, что все нужные данные попали в тест, можно посмотреть какие пользователи фактически видели тестовую версию: сколько b2b, b2c клиентов, клиенты с каким по стоимости пакетом услуг (товарами) прошли тест, т.д.	
((Расчеты Std, SE, DF, t-критерия приведены в прикрепленном notebook. Также в нем есть расчет p-value через библиотеку scipy)). 

| Подсчет итогов теста| Подсчет итогов теста | Подсчет итогов теста | 
| --- | --- | --- |
| Группы | A (контрольный, без изменения цен) | B (тестовый, с изменением цен) |
| Регионы | Регион 3| Регион 1|
| Размер выборки | Размер выборки можно посчитать с учетом прогнозируемого (ожидаемого) изменения метрик при помощи калькулятора для метрик среднего: https://statulator.com/SampleSize/ss2M.html 
| Длительность проведения теста | На тест по условиям задачи отвели 1 месяц|
| Размер выборки для подсчетов итогов теста (N)| Взяла кол-во заказов, т.к. нет информации о том, какие именно клиенты приведены - все имеющиеся в базе, все, кто заходил на сайт, или все, кто доходил до этапа покупки |
| Метрика | Средний чек | Средний чек |
| Уровень доверия | 95% | 95% |
| Ссылка на проверку p-value | https://www.socscistatistics.com/pvalues/tdistribution.aspx |



 
